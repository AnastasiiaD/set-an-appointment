{"ast":null,"code":"import _classCallCheck from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/training/get-news/src/common/withAuth/withAuth.js\";\n// withAuth.jsx\nimport React, { Component } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nexport default function withAuth(ComponentToProtect, path, isPrivatePath) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(_class, _Component);\n\n      function _class(props) {\n        var _this;\n\n        _classCallCheck(this, _class);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this, props));\n        _this.state = {\n          loading: true,\n          path: path,\n          isPrivatePath: isPrivatePath\n        };\n        return _this;\n      }\n\n      _createClass(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          console.log('here');\n          var privatePath = this.state.privatePath;\n\n          if (privatePath) {\n            fetch('/checkToken').then(function (res) {\n              if (res.status === 200) {\n                _this2.setState({\n                  loading: false\n                });\n              } else {\n                throw new Error(res.error);\n              }\n            }).catch(function (err) {\n              console.error(err);\n\n              _this2.setState({\n                loading: false,\n                redirect: true\n              });\n            });\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$state = this.state,\n              loading = _this$state.loading,\n              redirect = _this$state.redirect,\n              path = _this$state.path;\n\n          if (loading) {\n            return null;\n          }\n\n          if (redirect) {\n            return React.createElement(Redirect, {\n              to: \"/signin\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 42\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(Route, {\n            path: path,\n            render: function render(props) {\n              if (!redirect) {\n                return React.createElement(ComponentToProtect, Object.assign({}, props, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 46\n                  },\n                  __self: this\n                }));\n              } else {\n                return React.createElement(Redirect, {\n                  to: \"/signin\",\n                  exact: true,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 48\n                  },\n                  __self: this\n                });\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 44\n            },\n            __self: this\n          });\n        }\n      }]);\n\n      return _class;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["/Users/admin/training/get-news/src/common/withAuth/withAuth.js"],"names":["React","Component","Redirect","Route","withAuth","ComponentToProtect","path","isPrivatePath","props","state","loading","console","log","privatePath","fetch","then","res","status","setState","Error","error","catch","err","redirect"],"mappings":";;;;;;AAAA;AACA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA8B,kBAA9B;AAEA,eAAe,SAASC,QAAT,CAAkBC,kBAAlB,EAAsCC,IAAtC,EAA4CC,aAA5C,EAA2D;AACtE;AAAA;AAAA;AAAA;;AACI,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,oFAAMA,KAAN;AACA,cAAKC,KAAL,GAAa;AACTC,UAAAA,OAAO,EAAE,IADA;AAETJ,UAAAA,IAAI,EAAJA,IAFS;AAGTC,UAAAA,aAAa,EAAbA;AAHS,SAAb;AAFe;AAOlB;;AARL;AAAA;AAAA,4CAUwB;AAAA;;AAChBI,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AADgB,cAERC,WAFQ,GAEQ,KAAKJ,KAFb,CAERI,WAFQ;;AAGhB,cAAIA,WAAJ,EAAiB;AACbC,YAAAA,KAAK,CAAC,aAAD,CAAL,CACKC,IADL,CACU,UAAAC,GAAG,EAAI;AACT,kBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpB,gBAAA,MAAI,CAACC,QAAL,CAAc;AAACR,kBAAAA,OAAO,EAAE;AAAV,iBAAd;AACH,eAFD,MAEO;AACH,sBAAM,IAAIS,KAAJ,CAAUH,GAAG,CAACI,KAAd,CAAN;AACH;AACJ,aAPL,EAQKC,KARL,CAQW,UAAAC,GAAG,EAAI;AACVX,cAAAA,OAAO,CAACS,KAAR,CAAcE,GAAd;;AACA,cAAA,MAAI,CAACJ,QAAL,CAAc;AAACR,gBAAAA,OAAO,EAAE,KAAV;AAAiBa,gBAAAA,QAAQ,EAAE;AAA3B,eAAd;AACH,aAXL;AAYH;AAEJ;AA5BL;AAAA;AAAA,iCA8Ba;AAAA,4BAC6B,KAAKd,KADlC;AAAA,cACEC,OADF,eACEA,OADF;AAAA,cACWa,QADX,eACWA,QADX;AAAA,cACqBjB,IADrB,eACqBA,IADrB;;AAEL,cAAII,OAAJ,EAAa;AACT,mBAAO,IAAP;AACH;;AACD,cAAIa,QAAJ,EAAc;AACV,mBAAO,oBAAC,QAAD;AAAU,cAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH;;AACD,iBAAQ,oBAAC,KAAD;AAAO,YAAA,IAAI,EAAEjB,IAAb;AAAmB,YAAA,MAAM,EAAE,gBAACE,KAAD,EAAW;AAC1C,kBAAI,CAACe,QAAL,EAAe;AACX,uBAAO,oBAAC,kBAAD,oBAAwBf,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAP;AACH,eAFD,MAEO;AACH,uBAAO,oBAAC,QAAD;AAAU,kBAAA,EAAE,EAAC,SAAb;AAAuB,kBAAA,KAAK,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACH;AACJ,aANO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AAOH;AA7CL;;AAAA;AAAA,MAAqBP,SAArB;AAAA;AA+CH","sourcesContent":["// withAuth.jsx\nimport React, {Component} from 'react';\nimport {Redirect, Route} from 'react-router-dom';\n\nexport default function withAuth(ComponentToProtect, path, isPrivatePath) {\n    return class extends Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                loading: true,\n                path,\n                isPrivatePath,\n            };\n        }\n\n        componentDidMount() {\n            console.log('here');\n            const { privatePath } = this.state;\n            if (privatePath) {\n                fetch('/checkToken')\n                    .then(res => {\n                        if (res.status === 200) {\n                            this.setState({loading: false});\n                        } else {\n                            throw new Error(res.error);\n                        }\n                    })\n                    .catch(err => {\n                        console.error(err);\n                        this.setState({loading: false, redirect: true});\n                    });\n            }\n\n        }\n\n        render() {\n            const {loading, redirect, path} = this.state;\n            if (loading) {\n                return null;\n            }\n            if (redirect) {\n                return <Redirect to=\"/signin\"/>;\n            }\n            return (<Route path={path} render={(props) => {\n                if (!redirect) {\n                    return <ComponentToProtect {...props} />\n                } else {\n                    return <Redirect to='/signin' exact/>\n                }\n            }} />)\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}