{"ast":null,"code":"import _classCallCheck from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/training/get-news/src/common/withAuth/withAuth.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport apiHelper from \"../../utils/UiApiHelper\";\nexport default function withAuth(ComponentToProtect, isPrivatePath) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(_class, _Component);\n\n      function _class() {\n        var _this;\n\n        _classCallCheck(this, _class);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this));\n        _this.state = {\n          redirect: false,\n          isPrivatePath: isPrivatePath\n        };\n        return _this;\n      }\n\n      _createClass(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          apiHelper.checkToken().then(function (res) {\n            if (res.status === 200) {} else {\n              var error = new Error(res.error);\n              throw error;\n            }\n          }).catch(function (err) {\n            console.error(err);\n\n            _this2.setState({\n              redirect: true\n            });\n          });\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$state = this.state,\n              redirect = _this$state.redirect,\n              isPrivatePath = _this$state.isPrivatePath;\n\n          if (redirect && !isPrivatePath) {\n            this.setState({\n              redirect: false\n            });\n            return React.createElement(Redirect, {\n              to: \"/signin\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 32\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35\n            },\n            __self: this\n          }, React.createElement(ComponentToProtect, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 36\n            },\n            __self: this\n          })));\n        }\n      }]);\n\n      return _class;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["/Users/admin/training/get-news/src/common/withAuth/withAuth.js"],"names":["React","Component","Redirect","apiHelper","withAuth","ComponentToProtect","isPrivatePath","state","redirect","checkToken","then","res","status","error","Error","catch","err","console","setState","props"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AAEA,eAAe,SAASC,QAAT,CAAkBC,kBAAlB,EAAsCC,aAAtC,EAAsD;AACjE;AAAA;AAAA;AAAA;;AACI,wBAAc;AAAA;;AAAA;;AACV;AACA,cAAKC,KAAL,GAAa;AACTC,UAAAA,QAAQ,EAAE,KADD;AAETF,UAAAA,aAAa,EAAbA;AAFS,SAAb;AAFU;AAMb;;AAPL;AAAA;AAAA,4CAQwB;AAAA;;AAChBH,UAAAA,SAAS,CAACM,UAAV,GACKC,IADL,CACU,UAAAC,GAAG,EAAI;AACT,gBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB,CACvB,CADD,MACO;AACH,kBAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUH,GAAG,CAACE,KAAd,CAAd;AACA,oBAAMA,KAAN;AACH;AACJ,WAPL,EAQKE,KARL,CAQW,UAAAC,GAAG,EAAI;AACVC,YAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;;AACA,YAAA,MAAI,CAACE,QAAL,CAAc;AAAEV,cAAAA,QAAQ,EAAE;AAAZ,aAAd;AACH,WAXL;AAYH;AArBL;AAAA;AAAA,iCAsBa;AAAA,4BAC6B,KAAKD,KADlC;AAAA,cACCC,QADD,eACCA,QADD;AAAA,cACWF,aADX,eACWA,aADX;;AAEL,cAAIE,QAAQ,IAAI,CAACF,aAAjB,EAAgC;AAC5B,iBAAKY,QAAL,CAAc;AAAEV,cAAAA,QAAQ,EAAE;AAAZ,aAAd;AACA,mBAAO,oBAAC,QAAD;AAAU,cAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH;;AACD,iBACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,kBAAD,oBAAwB,KAAKW,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CADJ;AAKH;AAjCL;;AAAA;AAAA,MAAqBlB,SAArB;AAAA;AAmCH","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport apiHelper from \"../../utils/UiApiHelper\";\n\nexport default function withAuth(ComponentToProtect, isPrivatePath ) {\n    return class extends Component {\n        constructor() {\n            super();\n            this.state = {\n                redirect: false,\n                isPrivatePath\n            };\n        }\n        componentDidMount() {\n            apiHelper.checkToken()\n                .then(res => {\n                    if (res.status === 200) {\n                    } else {\n                        const error = new Error(res.error);\n                        throw error;\n                    }\n                })\n                .catch(err => {\n                    console.error(err);\n                    this.setState({ redirect: true });\n                });\n        }\n        render() {\n            let { redirect, isPrivatePath } = this.state;\n            if (redirect && !isPrivatePath) {\n                this.setState({ redirect: false });\n                return <Redirect to=\"/signin\" />;\n            }\n            return (\n                <React.Fragment>\n                    <ComponentToProtect {...this.props} />\n                </React.Fragment>\n            );\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}