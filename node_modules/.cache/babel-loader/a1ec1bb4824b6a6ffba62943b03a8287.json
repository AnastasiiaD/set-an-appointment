{"ast":null,"code":"import _classCallCheck from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/training/get-news/src/common/withAuth/withAuth.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport apiHelper from \"../../utils/UiApiHelper\";\nexport default function withAuth(ComponentToProtect, isPrivatePath, redirect) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(_class2, _Component);\n\n      function _class2() {\n        var _this;\n\n        _classCallCheck(this, _class2);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class2).call(this));\n\n        _this.checkToken = function () {\n          apiHelper.checkToken().then(function (res) {\n            if (res.status === 200) {\n              console.log('here');\n\n              _this.setState(function (state, props) {\n                return {\n                  isTokenValid: true\n                };\n              });\n            } else {\n              var error = new Error(res.error);\n              throw error;\n            }\n          }).catch(function (err) {\n            console.error(err);\n\n            _this.setState({\n              isTokenValid: false\n            }); // this.setState({ loading: false });\n\n          });\n        };\n\n        _this.state = {\n          isTokenValid: false,\n          loading: true\n        };\n\n        _this.checkToken();\n\n        return _this;\n      }\n\n      _createClass(_class2, [{\n        key: \"render\",\n        value: function render() {\n          var isTokenValid = this.state.isTokenValid;\n\n          if (!isTokenValid && isPrivatePath) {\n            debugger;\n            return React.createElement(Redirect, {\n              to: \"/signin\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 41\n              },\n              __self: this\n            });\n          } else {\n            return React.createElement(ComponentToProtect, Object.assign({}, this.props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44\n              },\n              __self: this\n            }));\n          }\n        }\n      }]);\n\n      return _class2;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["/Users/admin/training/get-news/src/common/withAuth/withAuth.js"],"names":["React","Component","Redirect","apiHelper","withAuth","ComponentToProtect","isPrivatePath","redirect","checkToken","then","res","status","console","log","setState","state","props","isTokenValid","error","Error","catch","err","loading"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AAEA,eAAe,SAASC,QAAT,CAAkBC,kBAAlB,EAAsCC,aAAtC,EAAqDC,QAArD,EAA+D;AAC1E;AAAA;AAAA;AAAA;;AACI,yBAAc;AAAA;;AAAA;;AACV;;AADU,cAUdC,UAVc,GAUD,YAAM;AACfL,UAAAA,SAAS,CAACK,UAAV,GACKC,IADL,CACU,UAAAC,GAAG,EAAI;AACT,gBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpBC,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,oBAAKC,QAAL,CAAc,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC5B,uBAAO;AAAEC,kBAAAA,YAAY,EAAE;AAAhB,iBAAP;AACH,eAFD;AAGH,aALD,MAKO;AACH,kBAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUT,GAAG,CAACQ,KAAd,CAAd;AACA,oBAAMA,KAAN;AACH;AACJ,WAXL,EAYKE,KAZL,CAYW,UAAAC,GAAG,EAAI;AACVT,YAAAA,OAAO,CAACM,KAAR,CAAcG,GAAd;;AACA,kBAAKP,QAAL,CAAc;AAAEG,cAAAA,YAAY,EAAE;AAAhB,aAAd,EAFU,CAGV;;AACH,WAhBL;AAiBH,SA5Ba;;AAEV,cAAKF,KAAL,GAAa;AACTE,UAAAA,YAAY,EAAE,KADL;AAETK,UAAAA,OAAO,EAAE;AAFA,SAAb;;AAKD,cAAKd,UAAL;;AAPW;AAQb;;AATL;AAAA;AAAA,iCA+Ba;AAAA,cACGS,YADH,GACoB,KAAKF,KADzB,CACGE,YADH;;AAEL,cAAI,CAACA,YAAD,IAAiBX,aAArB,EAAoC;AAChC;AACA,mBAAO,oBAAC,QAAD;AAAU,cAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH,WAHD,MAGO;AACH,mBACI,oBAAC,kBAAD,oBAAwB,KAAKU,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ;AAGH;AAEJ;AA1CL;;AAAA;AAAA,MAAqBf,SAArB;AAAA;AA4CH","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport apiHelper from \"../../utils/UiApiHelper\";\n\nexport default function withAuth(ComponentToProtect, isPrivatePath, redirect) {\n    return class extends Component {\n        constructor() {\n            super();\n            this.state = {\n                isTokenValid: false,\n                loading: true,\n            };\n\n           this.checkToken();\n        }\n\n        checkToken = () => {\n            apiHelper.checkToken()\n                .then(res => {\n                    if (res.status === 200) {\n                        console.log('here');\n                        this.setState((state, props) => {\n                            return { isTokenValid: true };\n                        });\n                    } else {\n                        const error = new Error(res.error);\n                        throw error;\n                    }\n                })\n                .catch(err => {\n                    console.error(err);\n                    this.setState({ isTokenValid: false });\n                    // this.setState({ loading: false });\n                });\n        };\n\n        render() {\n            const { isTokenValid } = this.state;\n            if (!isTokenValid && isPrivatePath) {\n                debugger;\n                return <Redirect to=\"/signin\" />;\n            } else {\n                return (\n                    <ComponentToProtect {...this.props} />\n                );\n            }\n\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}