{"ast":null,"code":"import _classCallCheck from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/training/get-news/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/training/get-news/src/common/routeRnder/routeRender.js\";\nimport React, { Component } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { setWhetherIsValid } from \"./../../actions/tokenActions\";\nimport token from \"../../reducers/tokenReducer\";\nexport function renderWithAuth(ComponentToProtect, isPrivatePath) {\n  var PageComponent =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(PageComponent, _Component);\n\n    function PageComponent() {\n      var _this;\n\n      _classCallCheck(this, PageComponent);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(PageComponent).call(this));\n      _this.state = {\n        isTokenValid: false\n      };\n      return _this;\n    }\n\n    _createClass(PageComponent, [{\n      key: \"componentWillMount\",\n      value: function componentWillMount() {\n        var _this2 = this;\n\n        if (isPrivatePath) {\n          this.props.checkToken().then(function () {\n            _this2.setState({\n              isTokenValid: true\n            });\n          }).catch(function (err) {\n            console.error(err);\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var token = this.props.token;\n\n        if (!isPrivatePath || token.isChecked && token.isTokenValid) {\n          return React.createElement(ComponentToProtect, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 33\n            },\n            __self: this\n          }));\n        } else if (!token.isChecked) {\n          return null;\n        } else if (!token.isTokenValid && isPrivatePath && token.isChecked) {\n          return React.createElement(Redirect, {\n            to: \"/signin\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38\n            },\n            __self: this\n          });\n        }\n      }\n    }]);\n\n    return PageComponent;\n  }(Component);\n\n  var mapStateToProps = function mapStateToProps(_ref) {\n    var token = _ref.token;\n    return {\n      token: token\n    };\n  };\n\n  var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n      checkToken: function checkToken() {\n        return dispatch(setWhetherIsValid());\n      }\n    };\n  };\n\n  return connect(mapStateToProps, mapDispatchToProps)(PageComponent);\n}\nexport function renderRoutes(routes) {\n  return routes.map(function (route) {\n    return React.createElement(Route, {\n      path: route.path,\n      component: renderWithAuth(route.component, route.isPrivatePath),\n      exact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    });\n  });\n}","map":{"version":3,"sources":["/Users/admin/training/get-news/src/common/routeRnder/routeRender.js"],"names":["React","Component","Redirect","Route","connect","setWhetherIsValid","token","renderWithAuth","ComponentToProtect","isPrivatePath","PageComponent","state","isTokenValid","props","checkToken","then","setState","catch","err","console","error","isChecked","mapStateToProps","mapDispatchToProps","dispatch","renderRoutes","routes","map","route","path","component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA8B,kBAA9B;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,iBAAR,QAAgC,8BAAhC;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AAEA,OAAO,SAASC,cAAT,CAAwBC,kBAAxB,EAA4CC,aAA5C,EAA2D;AAAA,MACxDC,aADwD;AAAA;AAAA;AAAA;;AAE1D,6BAAc;AAAA;;AAAA;;AACV;AACA,YAAKC,KAAL,GAAa;AACTC,QAAAA,YAAY,EAAE;AADL,OAAb;AAFU;AAMb;;AARyD;AAAA;AAAA,2CAUrC;AAAA;;AACjB,YAAIH,aAAJ,EAAmB;AACf,eAAKI,KAAL,CAAWC,UAAX,GACKC,IADL,CACU,YAAM;AACR,YAAA,MAAI,CAACC,QAAL,CAAc;AAACJ,cAAAA,YAAY,EAAE;AAAf,aAAd;AACH,WAHL,EAIKK,KAJL,CAIW,UAAAC,GAAG,EAAI;AACVC,YAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACH,WANL;AAOH;AACJ;AApByD;AAAA;AAAA,+BAsBjD;AAAA,YACEZ,KADF,GACW,KAAKO,KADhB,CACEP,KADF;;AAEL,YAAI,CAACG,aAAD,IAAmBH,KAAK,CAACe,SAAN,IAAmBf,KAAK,CAACM,YAAhD,EAA+D;AAC3D,iBACI,oBAAC,kBAAD,oBAAwB,KAAKC,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ;AAGH,SAJD,MAIO,IAAI,CAACP,KAAK,CAACe,SAAX,EAAsB;AACzB,iBAAO,IAAP;AACH,SAFM,MAEA,IAAI,CAACf,KAAK,CAACM,YAAP,IAAuBH,aAAvB,IAAwCH,KAAK,CAACe,SAAlD,EAA6D;AAChE,iBAAO,oBAAC,QAAD;AAAU,YAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;AACJ;AAjCyD;;AAAA;AAAA,IAClCpB,SADkC;;AAoC9D,MAAMqB,eAAe,GAAG,SAAlBA,eAAkB;AAAA,QAAEhB,KAAF,QAAEA,KAAF;AAAA,WAAc;AAClCA,MAAAA,KAAK,EAALA;AADkC,KAAd;AAAA,GAAxB;;AAIA,MAAMiB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,WAAK;AACpCV,MAAAA,UAAU,EAAE;AAAA,eAAMU,QAAQ,CAACnB,iBAAiB,EAAlB,CAAd;AAAA;AADwB,KAAL;AAAA,GAAnC;;AAIA,SAAOD,OAAO,CAACkB,eAAD,EAAkBC,kBAAlB,CAAP,CAA6Cb,aAA7C,CAAP;AACH;AAED,OAAO,SAASe,YAAT,CAAsBC,MAAtB,EAA8B;AACjC,SAAOA,MAAM,CAACC,GAAP,CAAW,UAACC,KAAD,EAAW;AACzB,WAAO,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAEA,KAAK,CAACC,IAAnB;AAAyB,MAAA,SAAS,EAAEtB,cAAc,CAACqB,KAAK,CAACE,SAAP,EAAkBF,KAAK,CAACnB,aAAxB,CAAlD;AAA0F,MAAA,KAAK,MAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH,GAFM,CAAP;AAGH","sourcesContent":["import React, {Component} from 'react';\nimport {Redirect, Route} from 'react-router-dom';\nimport {connect} from \"react-redux\";\nimport {setWhetherIsValid} from \"./../../actions/tokenActions\";\nimport token from \"../../reducers/tokenReducer\";\n\nexport function renderWithAuth(ComponentToProtect, isPrivatePath) {\n    class PageComponent extends Component {\n        constructor() {\n            super();\n            this.state = {\n                isTokenValid: false,\n            };\n\n        }\n\n        componentWillMount() {\n            if (isPrivatePath) {\n                this.props.checkToken()\n                    .then(() => {\n                        this.setState({isTokenValid: true})\n                    })\n                    .catch(err => {\n                        console.error(err);\n                    });\n            }\n        };\n\n        render() {\n            const {token} = this.props;\n            if (!isPrivatePath || (token.isChecked && token.isTokenValid)) {\n                return (\n                    <ComponentToProtect {...this.props} />\n                );\n            } else if (!token.isChecked) {\n                return null;\n            } else if (!token.isTokenValid && isPrivatePath && token.isChecked) {\n                return <Redirect to=\"/signin\"/>;\n            }\n        }\n    }\n\n    const mapStateToProps = ({token}) => ({\n        token,\n    });\n\n    const mapDispatchToProps = dispatch => ({\n        checkToken: () => dispatch(setWhetherIsValid()),\n    });\n\n    return connect(mapStateToProps, mapDispatchToProps)(PageComponent);\n}\n\nexport function renderRoutes(routes) {\n    return routes.map((route) => {\n        return <Route path={route.path} component={renderWithAuth(route.component, route.isPrivatePath)} exact />;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}